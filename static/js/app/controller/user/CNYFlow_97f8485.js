define("js/app/controller/user/CNYFlow",["js/app/controller/base","js/app/util/ajax","js/app/module/loading/loading","js/app/util/dict"],function(t,n,a,e){function l(){a.showLoading(),i().then(function(n){if(n.success){for(var a=n.data,e=0;e<a.length;e++)if("CNY"==a[e].currency){f.accountNumber=a[e].accountNumber,$("#amount").html(t.formatMoneyD(a[e].amount));break}s()}}),r()}function i(){return n.get("802503",{userId:t.getUserId()})}function s(){n.get("802524",f).then(function(n){if(n.success&&n.data.list.length){var a="";$.each(n.data.list,function(n,e){var l=+e.transAmount>=0?!0:!1,i=l?"t_21b504":"t_f64444",s=l&&"+"||"";a+='<li class="plr20 ptb20 b_bd_b clearfix lh15rem"><div class="wp60 fl s_10"><p class="t_4d">'+e.bizNote+'</p><p class="s_09 t_999 pt10">'+t.formatDate(e.createDatetime,"yyyy-MM-dd hh:mm:ss")+'</p></div><div class="wp40 fl tr '+i+' s_10">',"92"==e.bizType&&(s=""),a+='<span class="inline_block va-m pt1em">'+s+t.formatMoneyD(e.transAmount)+"元</span>","-11"==e.bizType&&(a+='<br/><span class="inline_block va-m s_09">手续费'+t.formatMoneyD(e.fee)+"元</span>"),a+="</div></li>"}),$("#fd-ul").html(a)}else n.msg?(t.showMsg(n.msg),1==f.start&&c()):1==f.start&&c("暂无资金流水!")})}function o(){$("#fd-ul").append('<li class="scroll-loadding"></li>')}function c(t){$("#fd-ul").html('<li class="bg_fff" style="text-align: center;line-height: 93px;">'+(t||"暂时无法查到数据!")+"</li>")}function r(){$("#recharge").on("click",function(){location.href="../pay/cny_recharge.html"}),$("#toWithDraw").on("click",function(){location.href="toWithDraw.html"}),$(window).on("scroll",function(){p&&!u&&$(document).height()-$(window).height()-10<=$(document).scrollTop()&&(p=!1,o(),r())})}{var f={start:1,limit:20},u=!1,p=!1;e.get("fundType")}l()});