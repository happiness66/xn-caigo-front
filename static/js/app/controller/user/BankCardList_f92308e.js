define("js/app/controller/user/BankCardList",["js/app/controller/base","js/app/util/ajax","js/app/module/loading/loading","js/lib/handlebars.runtime-v3.0.3"],function(a,n,e){function t(){e.createLoading(),i(),d()}function i(){n.get("802016",{userId:a.getUserId(),status:"1"}).then(function(n){if(e.hideLoading(),n.success)if(n.data.length){var t="";n.data.forEach(function(n){t+='<div class="bankcard-item-wrap"><div class="bankcard-item"><img src="/static/images/backcard_icon.png?__inline"/><div class="bankcard-item-right"><div class="bankcard-item-title">'+n.bankName+'</div><div class="bankcard-item-number">'+a.getBankCard(n.bankcardNumber)+'</div></div><span class="bankcard-delete" data-code="'+n.code+'">删除</span></div></div>'}),$("#bankCardContainer").html(t)}else c();else a.showMsg(n.msg)})}function d(){$("#sbtn").on("click",function(){location.href="./add_bankCard.html"}),$("#bankCardContainer").on("click",".bankcard-delete",function(a){a.preventDefault(),a.stopPropagation();var n=$(this);s(n.attr("data-code"),n.closest(".bankcard-item-wrap"))})}function s(t,i){e.createLoading("删除中..."),n.post("802011",{json:{code:t}}).then(function(n){e.hideLoading(),n.success?1==$("#bankCardContainer").find(".bankcard-item-wrap").length?c():i.remove():a.showMsg(n.msg)})}function c(){$("#bankCardContainer").html('<div class="bg_fff" style="text-align: center;line-height: 150px;">暂无银行卡</div>')}t()});