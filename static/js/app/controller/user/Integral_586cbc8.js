define("js/app/controller/user/Integral",["js/app/controller/base","js/app/util/ajax","js/app/module/loading/loading","js/app/util/dict"],function(t,n,l,a){function e(){l.showLoading(),s().then(function(n){if(n.success){for(var l=n.data,a=0;a<l.length;a++)if("CGJF"==l[a].currency){u.accountNumber=l[a].accountNumber,$("#amount").html(t.formatMoneyD(l[a].amount));break}i()}}),r()}function s(){return n.get("802503",{userId:t.getUserId()})}function i(){n.get("802524",u).then(function(n){if(n.success&&n.data.list.length){var l="";$.each(n.data.list,function(n,a){var e=+a.transAmount>=0?!0:!1,s=e?"t_21b504":"t_f64444",i=e&&"+"||"";l+='<li class="plr20 ptb20 b_bd_b clearfix lh15rem"><div class="wp60 fl s_10"><p class="t_4d">'+a.bizNote+'</p><p class="s_09 t_999 pt10">'+t.formatDate(a.createDatetime,"yyyy-MM-dd hh:mm:ss")+'</p></div><div class="wp40 fl tr '+s+' s_10"><span class="inline_block va-m pt1em">'+i+t.formatMoneyD(a.transAmount)+"</span></div></li>"}),$("#fd-ul").html(l)}else n.msg?(t.showMsg(n.msg),1==u.start&&c()):1==u.start&&c("暂无资金流水!")})}function o(){$("#fd-ul").append('<li class="scroll-loadding"></li>')}function c(t){$("#fd-ul").html('<li class="bg_fff" style="text-align: center;line-height: 93px;">'+(t||"暂时无法查到数据!")+"</li>")}function r(){$("#buyIntegral").on("click",function(){location.href="buyIntegral.html"}),$(window).on("scroll",function(){d&&!f&&$(document).height()-$(window).height()-10<=$(document).scrollTop()&&(d=!1,o(),r())})}{var u={start:1,limit:20},f=!1,d=!1;a.get("fundType")}e()});