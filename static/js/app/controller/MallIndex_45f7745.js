define("js/app/controller/MallIndex",["js/app/controller/base","js/app/util/ajax","js/app/util/dict","js/lib/swiper-3.3.1.jquery.min","js/app/module/loadImg/loadImg"],function(t,a,i,e,n){function s(){l(),$.when(a.post("808007",{json:{parentCode:"0",status:"1",orderColumn:"order_no",orderDir:"asc",type:"1"}}),c(!0),r(),o()).then(function(a){if(a.success){var i=a.data;$.each(i,function(a,i){var e=i.pic,n=i.name,s=i.code,o='<li><div><img src="'+t.getImg(e)+'" alt=""></div><p>'+n+"</p></li>";o=$(o),o.on("click",function(){location.href="./mall_list.html?c="+s}),$(".classOne").append(o)}),$("#cont").hide()}})}function o(){a.get("804040",{pushType:41,toKind:1,channelType:4,status:1,start:1,limit:1,fromSystemCode:SYSTEM_CODE}).then(function(t){t.success&&t.data.list.length&&$(".noticeCon p").text(t.data.list[0].smsTitle)})}function r(){a.get("806051",{type:"2",location:"index_banner"}).then(function(a){if(a.success&&a.data.length){var i="";a.data.forEach(function(a){i+='<div class="swiper-slide"><img data-url= "'+a.url+'" class="wp100" src="'+t.getImg(a.pic,1)+'"></div>'}),$("#top-swiper").html(i);{new e("#swiper-container",{direction:"horizontal",loop:!0,autoplay:2e3,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination"})}}})}function c(i){return u.start=i&&1||u.start,a.get("808025",u,!i).then(function(a){if(a.success){var i="";$.each(a.data.list,function(a,e){var n=e.advPic,s=e.name,o=e.slogan,r=e.originalPrice?e.originalPrice/1e3:"",c=e.price2?t.formatMoney(e.price2)+"菜狗币":"",l=e.price3?t.formatMoney(e.price3)+"抵金券":"",p=e.code;i+='<li class="ptb8 clearfix b_bd_b plr10"><a class="show p_r min-h100p" href="../operator/buy.html?code='+p+'"><div class="order-img-wrap tc"><img class="center-img1" src="'+t.getImg(n,1)+'"></div><div class="order-right-wrap clearfix"><p class="t_323232 s_12 line-tow">'+s+'</p><p class="t_999 s_10 line-tow">'+o+'</p><p class="t_red ptb4">',0!=e.price2&&0!=e.price3?(i+='<span class="s_12 t_red">'+c+"</span>",i+='<span class="s_12 t_red">+'+l+"</span>"):0==e.price2&&0!=e.price3?i+='<span class="s_12 t_red">'+l+"</span>":0!=e.price2&&0==e.price3&&(i+='<span class="s_12 t_red">'+c+"</span>"),i+='</p><p class="s_10">市场参考价：<span>'+r+"</span>元</p></div></a></li>"}),$("#contUl").append(n.loadImg(i)),u.limit>a.data.list.length||u.limit>=a.data.totalCount?p=!0:u.start++}else t.showMsg(a.msg)})}function l(){$("#searchIcon").on("click",function(){var t=$("#searchInput").val().trim();t=decodeURIComponent(t),location.href="./search.html?s="+t}),$(window).on("scroll",function(){d&&!p&&$(document).height()-$(window).height()-10<=$(document).scrollTop()&&(d=!1,addLoading(),addListener())}),$("#swiper-container").on("touchstart",".swiper-slide img",function(t){var a=t.originalEvent.targetTouches[0],i=$(this);i.data("x",a.clientX)}),$("#swiper-container").on("touchend",".swiper-slide img",function(t){var a=$(this),i=t.originalEvent.changedTouches[0],e=i.clientX,n=parseInt(a.data("x"))-e;if(Math.abs(n)<6){var s=a.attr("data-url");s&&(location.href=/^http/i.test(s)?s:"http://"+s)}})}var p=!1,d=!1,u=(i.get("indexTopImg"),($(window).width()-20)/2-8+"px",{status:"3",start:1,limit:15,orderColumn:"order_no",orderDir:"asc",location:"1"});s(),t.getCartLength()});