define("js/app/controller/new/RedPapper",["js/app/controller/base","js/app/util/ajax","js/app/util/dialog","js/app/util/dict"],function(s,t){$(function(){function a(){p(),$("#historyBtn").click(function(){location.href="../../new/redPapperHistory.html?hzbCode="+e})}function p(){$(".redPapperWrap").on("click","li.hzbList",function(){var s=$(this).attr("data-code");location.href="./redPapperDetail.html?hbCode="+s+"&hzbCode="+e+"&flagHb=1"});var a=new Date,p={hzbCode:e,owner:s.getUserId(),companyCode:COMPANYCODE,start:"0",limit:"20",createDatetimeStart:s.formatDate(a,"yyyy-MM-dd"),createDatetimeEnd:s.formatDate(a,"yyyy-MM-dd")};$.when(t.post("615135",{json:p}),s.getDictList("615907","hzb_mgift_status")).then(function(t,a){if(t.success&&a.success){for(var p=t.data.list,e=a.data,i="",l=0;l<p.length;l++){var c=p[l].status,n=p[l].slogan,r=p[l].code,o="";0==c&&(o+='<li class="hzbList plr20 pt10 br_4p wp100 mt10 clearfix bg_begin" data-code="'+r+'"><div class="wp100 fl s_12">',o+='<p class="t_white"><span>'+n+"</span></p>",o+='<p class=" t_white pt10">红包编号:<span class="ml20">'+r+"</span></p>",o+='<p class=" t_white pt8 fs13">状态：<span class="status">'+s.getDictListValue(c,e)+"</span></p></div></li>"),1==c?(o+='<li class="hzbList plr20 pt10 br_4p wp100 mt10 clearfix bg_ing" data-code="'+r+'"><div class="wp100 fl s_12">',o+='<p class="t_white"><span>'+n+"</span></p>",o+='<p class=" t_white pt10">红包编号:<span class="ml20">'+r+"</span></p>",o+='<p class=" t_white pt8 fs13">状态：<span class="status">'+s.getDictListValue(c,e)+"</span></p></div></li>"):2==c&&(o+='<li class="plr20 pt10 br_4p wp100 mt10 clearfix bg_end" data-code="'+r+'"><div class="wp100 fl s_12">',o+='<p class="t_white"><span>'+n+"</span></p>",o+='<p class=" t_white pt10">红包编号:<span class="ml20">'+r+"</span></p>",o+='<p class=" t_white pt8 fs13">状态：<span class="status">'+s.getDictListValue(c,e)+"  领取人:"+p[l].receiverUser.mobile+"</span></p></div></li>"),i+=o}$(".redPapperWrap").append(i)}else s.showMsg(t.msg&&a.msg)})}var e=s.getUrlParam("hzbCode");a()})});