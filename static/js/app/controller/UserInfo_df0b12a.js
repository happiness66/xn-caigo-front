define("js/app/controller/UserInfo",["js/app/controller/base","js/app/util/ajax","js/app/module/loading/loading","js/app/module/judgeBindMobile/judgeBindMobile"],function(e,n,o){function t(){o.createLoading(),e.isLogin()&&($.when(i(),a(),s()).then(o.hideLoading,o.hideLoading),c())}function s(){return n.get("807717",{ckey:"telephone"}).then(function(n){o.hideLoading(),n.success?$("#telephone").html('<a href="tel://'+n.data.note+'">'+n.data.note+"</a>"):e.showMsg(n.msg)})}function a(){return n.get("802503",{userId:e.getUserId()}).then(function(n){if(n.success){var o=n.data;o.forEach(function(n){"CNY"==n.currency?$("#cnyAmount").html(e.formatMoneyD(n.amount)):"CGJF"==n.currency?$("#jfAmount").html(e.formatMoneyD(n.amount)):"CGB"==n.currency&&$("#cgbAmount").html(e.formatMoneyD(n.amount))})}})}function i(){return e.getUser().then(function(n){if(n.success){var o=n.data;$("#mobile").text(o.mobile),sessionStorage.setItem("m",o.mobile)}else e.showMsg(n.msg||"暂时无法获取用户信息！")})}function c(){$("#ifTree").on("click",function(){o.showLoading(),n.post("615118",{json:{userId:e.getUserId()}}).then(function(n){if(o.hideLoading(),n.success){var t=n.data;location.href=t&&t.length?"../new/hadBuyed.html":"../new/moneyTree.html"}else e.showMsg(n.msg)})})}t()});