define("js/app/controller/Recharge1",["js/app/controller/base","js/app/util/ajax","js/app/util/dict","js/app/util/dialog"],function(t,n,a,e){$(function(){function t(){n.get(APIURL+"/account/get",{currency:"CNY"},!0).then(function(t){if(t.success){var n=t.data;i=n.accountNumber}else s("账户信息获取失败！"),$("#sbtn").attr("disabled","disabled")}),a()}function a(){$("#account").on("change",c),$("#amount").on("change",o),$("#sbtn").on("click",function(){c()&&o()&&u()})}function c(){var t=$("#account")[0],n=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/g,a=/^1[3,4,5,7,8]\d{9}$/g;return t.value&&t.value.trim()?t.value.length>32?(s("支付宝账号过长!"),!1):n.test(t.value)||a.test(t.value)?!0:(s("支付宝账号格式错误!"),!1):(s("支付账号不能为空!"),!1)}function o(){var t=!0,n=$("#amount"),a=n.val();return void 0==a||""===a?(s("充值金额不能为空！"),t=!1):isNaN(a)?(s("充值金额只能是数字！"),t=!1):/^-?\d+(?:\.\d{1,2})?$/.test(a)?0>=+a?(s("充值金额必须大于0！"),t=!1):+a>1e6&&(s("充值金额不能大于1,000,000元！"),t=!1):(s("充值金额只能是两位以内小数！"),t=!1),t}function u(){$("#sbtn").attr("disabled","disabled").val("提交中...");var t={accountNumber:i,amount:1e3*$("#amount").val(),fromCode:$("#account").val()};n.post(APIURL+"/account/doRecharge",t).then(function(t){t.success?($("#sbtn").val("提交"),location.href="./recharge2.html"):(s(t.msg),$("#sbtn").removeAttr("disabled").val("提交"))})}function s(t){var n=e({content:t,quickClose:!0});n.show(),setTimeout(function(){n.close().remove()},2e3)}var i="";t()})});