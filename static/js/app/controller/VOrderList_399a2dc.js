define("js/app/controller/VOrderList",["js/app/controller/base","js/app/util/ajax","js/app/util/dict","js/app/module/loadImg/loadImg"],function(t,l,a,i){$(function(){function a(){t.getDictList("808907","vorder_status").then(function(t){u=t.data,s()})}function s(){f.start=1,r=!0,d=!1,p=!1,$("#ol-ul").empty(),$("#noItem").addClass("hidden"),o(),e(),$(window).on("scroll",function(){$(this);p&&!d&&$(document).height()-$(window).height()-10<=$(document).scrollTop()&&(p=!1,o(),e())}),$("#ol-ul").on("click","li span.ol-tobuy",function(t){t.stopPropagation(),t.preventDefault();var l=$(this);location.href="../detail/recharge_cardPay.html?code="+l.closest("li[code]").attr("code")+"&a="+l.closest("li[code]").attr("price")+"&rate="+l.closest("li[code]").attr("rate")})}function e(){l.post("808668",{json:f}).then(function(l){if(l.success){var a=l.data,s="",e=+a.totalCount,o=a.list;(e<=f.limit||o.length<f.limit)&&(d=!0),o.length?(o.forEach(function(l){var a=l,i=(l.amount2,l.amount3,l.code),e="加油卡号:",o="加油姓名:";3==a.product.type&&(e="手机号:",o="姓名:"),s+='<li class="clearfix b_bd_b b_bd_t bg_fff mb10" code="'+i+'" price="'+a.amount/1e3+'" rate="'+a.product.rate+'"><a class="show plr10" href="./vorder_detail.html?code='+i+'" class="show"><div class="wp100 b_bd_b clearfix ptb10"><div class="fl">订单号：<span>'+i+"</span></div></div>",s+='<div class="wp100 clearfix ptb4 p_r min-h100p"><div class="order-img-wrap ml10 tc default-bg"><img class="center-img1" src="'+t.getImg(a.product.advPic)+'"></div><div class="order-right-wrap clearfix"><div class="fl wp60 pt12"><p class="tl line-tow">'+e+a.reCardno+'</p><p class="tl line-tow">'+o+a.reName+'</p><p class="tl line-tow">充值面额:'+a.amount/1e3+'</p></div><div class="fl wp40 tr pt12">',s+='</div><div class="wp100 clearfix ptb6 mt1emys"><span class="fr inline_block bg_f64444 t_white s_10 plr8 ptb4 b_radius4 '+("0"==a.status?"ol-tobuy":"")+'">'+t.getDictListValue(a.status,u)+"</span></div></a></li>"}),c(),$("#ol-ul").append(i.loadImg(s)),f.start+=1,p=!0):r?n():c()}else r?n():c();r=!1})}function o(){$("#ol-ul").append('<li class="scroll-loadding"></li>')}function c(){$("#ol-ul").find(".scroll-loadding").remove()}function n(){$("#ol-ul").empty(),$("#noItem").removeClass("hidden"),p=!1}{var r,d,p,u,f={limit:10,start:1,applyUser:t.getUserId()};($(window).width()-20)/3+"px",t.getUrlParam("i")||0}a()})});