define("js/app/controller/ShakeShare",["js/app/controller/base","js/app/util/ajax","js/lib/jweixin-1.0.0","js/lib/fingerprint2"],function(e,n,t,i){function a(){$(".hasName").text(g),200>u&&(u="小于200"),$(".distance").text(u+"m"),o(),c(),s()}function o(){$("#code").qrcode({width:200,height:200,text:SHAKEURL+"/index.html"})}function s(){n.get("807910",{companyCode:SYSTEM_CODE,url:location.href.split("#")[0]}).then(function(e){r(e.data)},function(){})}function r(e){t.config({appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareQQ","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQZone"]}),t.ready(function(){t.onMenuShareAppMessage({title:"菜狗商城,摇一摇领奖",desc:"菜狗商城,摇一摇领奖",link:window.location.href+"&userReferee="+m,imgUrl:SHAKEURL+"/static/images/logo2.png",success:function(){l()},fail:function(e){alert(JSON.stringify(e))}}),t.onMenuShareTimeline({title:"菜狗商城,摇一摇领奖",desc:"菜狗商城,摇一摇领奖",link:window.location.href+"&userReferee="+m,imgUrl:SHAKEURL+"/static/images/logo2.png",success:function(){l()},fail:function(e){alert(JSON.stringify(e))}}),t.onMenuShareQQ({title:"菜狗商城,摇一摇领奖",desc:"菜狗商城,摇一摇领奖",link:window.location.href+"&userReferee="+m,imgUrl:SHAKEURL+"/static/images/logo2.png",success:function(){l()},fail:function(e){alert(JSON.stringify(e))}}),t.onMenuShareQZone({title:"菜狗商城,摇一摇领奖",desc:"菜狗商城,摇一摇领奖",link:window.location.href+"&userReferee="+m,imgUrl:SHAKEURL+"/static/images/logo2.png",success:function(){l()},fail:function(e){alert(JSON.stringify(e))}})}),t.error(function(e){alert("微信分享sdk初始化失败"+JSON.stringify(e))})}function c(){$("#shakeAfterSta1").on("click",function(){$("#shakeAfterSta1").removeClass("active")})}function l(){$.when(n.get("615120",{userId:e.getUserId(),hzbCode:h,deviceNo:d}),e.getDictList("802006","currency")).then(function(n,t){if(n.success&&t.success){var i=t.data,a=e.formatMoneyD(n.data.yyAmount),o=f(n.data.yyCurrency,i);$("#yyAmount").html("获取"+a+o),$("#shakeAfterSta1").addClass("active"),setTimeout(function(){$("#shakeAfterSta1").removeClass("active"),location.href="../index.html"},1500)}else e.showMsg(n.msg)})}function f(e,n){for(var t=0;t<n.length;t++)if(e==n[t].dkey)return n[t].dvalue}var u,g,d,g=e.getUrlParam("hasName"),u=e.getUrlParam("distance"),h=e.getUrlParam("hCode"),m=e.getUserId();(new i).get(function(e){d=e,a()})});