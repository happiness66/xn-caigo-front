define("js/app/controller/FundDetails",["js/app/controller/base","js/app/util/ajax","js/app/util/dialog","js/app/util/dict","js/lib/handlebars.runtime-v3.0.3"],function(t,e,n,a){$(function(){function n(){if(h){document.title="资金明细";var t=$('<iframe src="/static/images/favicon.ico"></iframe>');t.on("load",function(){setTimeout(function(){t.off("load").remove()},0)}).appendTo($("body"))}e.get(APIURL+"/account/infos/page",{start:0,limit:8},!0).then(function(t){if(t.success){var e=t.data.list[0],n=t.data.list[1];h?(g="元",v=2,d.accountNumber="CNY"==e.currency?e.accountNumber:n.accountNumber):d.accountNumber="CNY"==e.currency?n.accountNumber:e.accountNumber,l(),r()}else i()})}function i(t){$("#fd-ul").html('<li class="bg_fff" style="text-align: center;line-height: 93px;">'+(t?t:"暂时无法查到数据!")+"</li>")}function l(){f||c();var t=APIURL+"/account/detail/page";e.get(t,d,!0).then(function(t){if(t.success){var e=t.data,n=e.list,a=+e.totalCount;if((a<d.limit||n.length<d.limit)&&(p=!0),n.length){var l="";n.forEach(function(t){var e=+t.transAmount>=0?!0:!1,n=e&&"t_f64444"||"t_21b504",a=e&&"+"||"",i=t.bizType,c="";c="21"==i||"22"==i?t.remark:b[t.bizType]||"未知类型",l+='<li class="plr20 ptb20 b_bd_b clearfix lh15rem"><div class="wp60 fl s_10"><p class="t_4d">'+c+'</p><p class="s_09 t_999 pt10">'+s(t.createDatetime)+'</p></div><div class="wp40 fl tr '+n+' s_10"><span class="inline_block va-m pt1em">'+a+(+t.transAmount/1e3).toFixed(v)+g+"</span></div></li>"}),f?$("#fd-ul").html(l):(o(),$("#fd-ul").append(l)),d.start+=1}else f?i("暂无资金流水!"):o()}else f?i():o();f=!1,m=!0})}function c(){$("#fd-ul").append('<li class="scroll-loadding"></li>')}function o(){$("#fd-ul").find(".scroll-loadding").remove()}function s(t){var e=new Date(t);return u(e.getFullYear())+"-"+u(e.getMonth()+1)+"-"+u(e.getDate())+" "+u(e.getHours())+":"+u(e.getMinutes())+":"+u(e.getSeconds())}function u(t){return 10>t?"0"+t:t}function r(){$(window).on("scroll",function(){$(this);m&&!p&&$(document).height()-$(window).height()-10<=$(document).scrollTop()&&(m=!1,l())})}var d={dateStart:"",dateEnd:"",start:1,limit:15,bizType:"",accountNumber:""},f=!0,p=!1,m=!0,g="抵金券",b=a.get("fundType"),h=t.getUrlParam("m")||"",v=0;n()})});