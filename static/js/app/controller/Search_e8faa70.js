define("js/app/controller/Search",["js/app/controller/base","js/app/util/ajax","js/app/module/loadImg/loadImg"],function(a,e,s){$(function(){function c(){l(),o&&($("#searchInput").val(o),$("#searchIcon").click())}function l(){$("#searchIcon").on("click",function(){o=$("#searchInput").val(),p=!0,d=!1,h.start=1,f=!1,$("#searchUl").empty(),n()}),$(window).on("scroll",function(){$(this);f&&!d&&$(document).height()-$(window).height()-10<=$(document).scrollTop()&&(f=!1,n())})}function n(){r(),h.name=o,e.get(m,h,!0).then(function(e){if(e.success){var c=e.data,l=c.list;if((+c.totalCount<=h.limit||l.length<h.limit)&&(d=!0),l.length){var n="";l.forEach(function(e){n+='<li class="ptb8 clearfix b_bd_b"><a class="show p_r min-h100p" href="../operator/buy.html?code='+e.code+'"><div class="order-img-wrap tc default-bg"><img class="center-img1 center-lazy" src="'+a.getImg(e.advPic)+'"/></div><div class="order-right-wrap clearfix"><p class="t_323232 s_12 line-tow">'+e.name+'</p><p class="t_999 s_10 line-tow">'+e.slogan+'</p><p class="t_red ptb4">',e.price2&&(n+='<span class="s_12 t_red">'+a.formatMoney(e.price2)+"菜狗币</span>"),e.price2&&e.price3?n+='<span class="s_12 t_red">+'+a.formatMoney(e.price3)+"抵金券</span>":e.price3&&"0"==e.price2&&(n+='<span class="s_12 t_red">'+a.formatMoney(e.price3)+"抵金券</span>"),n+="</p>",e.originalPrice&&(n+='<p class="s_10">市场参考价：<span>'+a.formatMoney(e.originalPrice)+"</span>元</p>"),n+="</div></a></li>"}),i(),$("#searchUl").append(s.loadImg(n)),h.start+=1}else p?t("没有相关商品"):i(),d=!0}else p?t():i(),d=!0;p=!1,f=!0})}function r(){$("#searchUl").append('<li class="scroll-loadding"></li>')}function t(a){a=a||"暂时无法获取商品信息",$("#searchUl").html('<li class="bg_fff" style="text-align: center;line-height: 110px;">'+a+"</li>")}function i(){$("#searchUl").find(".scroll-loadding").remove()}var o=a.getUrlParam("s")||"",p=!0,d=!1,f=!1,h={limit:15,start:1,status:"3",orderColumn:"order_no",orderDir:"asc"},m="808025";c()})});