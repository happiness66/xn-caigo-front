define("js/app/controller/VOrderDetail",["js/app/controller/base","js/app/util/ajax","js/app/util/dict","js/app/util/dialog","js/lib/handlebars.runtime-v3.0.3","js/app/module/loadImg/loadImg"],function(e,t,a,o,n,s){$(function(){function l(){$("#orderCode").text(m),function(){var a={code:m};t.get("808666",a).then(function(t){if($("#cont").remove(),t.success){{var a=t.data,o="";a.product}f=a.amount/1e3,h=a.product.rate,$("#orderDate").text(r(a.applyDatetime)),$("#orderStatus").text(e.getDictListValue(a.status,u)),"0"==a.status&&($("footer").removeClass("hidden"),$("#cbtn").on("click",function(){$("#od-mask, #od-tipbox").removeClass("hidden")}),$("#sbtn").on("click",function(){location.href="../detail/recharge_cardPay.html?code="+m+"&a="+f+"&rate="+h}),c()),a.applyNote&&($("#applyNoteTitle, #applyNoteInfo").removeClass("hidden"),$("#applyNoteInfo").text(a.applyNote));var n="加油卡号:",l="加油姓名:";3==a.product.type&&(n="手机号:",l="姓名:");var o="<ul>";o+='<ul><li class="ptb8 clearfix b_bd_b" modelCode="'+a.product.code+'"><a class="show p_r min-h100p" href="../detail/recharge_cardDetail.html?code='+a.product.code+'"><div class="order-img-wrap ml10 tc default-bg mr10"><img class="center-img1" src="'+e.getImg(a.product.advPic)+'"/></div><div class="order-right-wrap clearfix"><div class="fl wp60 plr10"><p class="tl line-tow pt6">'+n+a.reCardno+'</p><p class="tl line-tow pt6">'+l+a.reName+'</p><p class="tl line-tow pt6">充值面额:'+a.amount/1e3+'</p></div><div class="fl wp40 tr s_11">',o+="</ul>",$("#od-ul").append(s.loadImg(o)),$("#totalAmount").html(e.formatMoney(a.amount*a.product.rate)+"菜狗币"),$("#od-id").html(a.code)}else p("暂时无法获取订单信息！")})}()}function r(e){var t=new Date(e);return t.getFullYear()+"-"+d(t.getMonth()+1)+"-"+d(t.getDate())+" "+d(t.getHours())+":"+d(t.getMinutes())+":"+d(t.getSeconds())}function d(e){return 10>e?"0"+e:e}function c(){$("#odOk").on("click",function(){i(),$("#od-mask, #od-tipbox").addClass("hidden")}),$("#odCel").on("click",function(){$("#od-mask, #od-tipbox").addClass("hidden")})}function i(){dCode=[],dCode.push(m);var a={json:{codeList:dCode,remark:"用户自行取消",updater:e.getUserId()}};$("#loaddingIcon").removeClass("hidden"),t.post("808652",a).then(function(t){$("#loaddingIcon").addClass("hidden"),t.success?(p("取消订单成功！"),setTimeout(function(){e.getBack()},1e3)):p(t.msg)})}function p(e){var t=o({content:e,quickClose:!0});t.show(),setTimeout(function(){t.close().remove()},2e3)}var u,m=e.getUrlParam("code"),f=(a.get("receiptType"),a.get("fastMail"),n.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,o){var n,s=t.helperMissing,l="function",r=this.escapeExpression;return'<p class="wp100"><span class="pr1em">收货人</span>：<span class="pl_5em">'+r((n=null!=(n=t.receiver||(null!=e?e.receiver:e))?n:s,typeof n===l?n.call(e,{name:"receiver",hash:{},data:o}):n))+'</span><span class="pl20">'+r((n=null!=(n=t.reMobile||(null!=e?e.reMobile:e))?n:s,typeof n===l?n.call(e,{name:"reMobile",hash:{},data:o}):n))+'</span></p>\r\n<p class="wp100 pt10 p_r">\r\n	<span class="ab">收货地址：</span>\r\n    <span class="t_73 s_10 pl5_5em inline_block">\r\n        <span>'+r((n=null!=(n=t.reAddress||(null!=e?e.reAddress:e))?n:s,typeof n===l?n.call(e,{name:"reAddress",hash:{},data:o}):n))+"</span>\r\n    </span>\r\n</p>\r\n"},useData:!0}),0),h=1;e.getDictList("808907","vorder_status").then(function(e){u=e.data,l()})})});