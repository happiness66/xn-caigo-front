define("js/app/controller/operator/PayOrder",["js/app/controller/base","js/app/util/ajax","js/app/util/dialog","js/app/module/loadImg/loadImg"],function(s,a,e,o){function n(){var e,n={code:l};a.get("808066",n).then(function(a){if(a.success){var n=a.data,p=n.productOrderList;"1"!==n.status&&(location.href="../user/user_info.html"),$("#cont").remove();var r=0,l=0;if(p.length){var c="";if(p.forEach(function(a){e=+a.quantity,a.price2&&(r+=e*+a.price2),a.price3&&(l+=e*+a.price3),c+='<li class="ptb8 clearfix b_bd_b plr10" modelCode="'+a.productCode+'"><a class="show p_r min-h100p" href="../operator/buy.html?code='+a.productCode+'"><div class="order-img-wrap tc default-bg"><img class="center-img1" src="'+s.getImg(a.product.advPic)+'"/></div><div class="order-right-wrap clearfix"><div class="fl wp60"><p class="tl line-tow">'+a.product.name+'</p></div><div class="fl wp40 tr s_11">',a.price2&&(c+='<p class="item_totalP">'+s.formatMoney(a.price2)+'<span class="t_40pe s_09 pl4">菜狗币</span></p>'),a.price3&&(c+='<p class="item_totalP">'+s.formatMoney(a.price3)+'<span class="t_40pe s_09 pl4">抵金券</span></p>'),c+='<p class="t_80">×<span>'+a.quantity+"</span></p></div></div></a></li>"}),c+="</ul>",$("#cont").remove(),$("footer, #items-cont").removeClass("hidden"),$("#items-cont").append(o.loadImg(c)),n.amount2&&$("#totalAmount").html(s.formatMoney(n.amount2)).parent().parent().removeClass("hidden"),n.amount3&&($("#mAdd, #jfDiv").removeClass("hidden"),$("#totalJFAmount").html(s.formatMoney(n.amount3))),n.amount2)var i='<p><span class="pr2em">总计</span>：<span class="pl_5rem">'+(n.amount2?s.formatMoney(n.amount2)+"菜狗币":"")+(n.amount3?" + "+(s.formatMoney(n.amount3)+"抵金券"):"")+'<span></span></p><p><span class="pr1em">订单号</span>：<span class="pl_5rem">'+n.code+"</span></p>";else var i='<p><span class="pr2em">总计</span>：<span class="pl_5rem">'+s.formatMoney(n.amount3)+'抵金券<span></span></p><p><span class="pr1em">订单号</span>：<span class="pl_5rem">'+n.code+"</span></p>";n.reAddress&&(i+='<p><span>配送信息：</span><span class="pl_5rem">'+n.receiver+'</span><span class="pl10">'+n.reMobile+'</span></p><p class="pl5_5rem t_73 s_09_5">'+n.reAddress+"</p>"),$("#addressDiv").html(i)}else $("#cont").remove(),t("#container")}else $("#cont").remove(),t("#container")})}function t(s){$(s).html('<div class="bg_fff" style="text-align: center;line-height: 150px;">暂时无法获取数据</div>')}function p(){$("#odOk").on("click",function(){$("#od-mask, #od-tipbox").addClass("hidden"),r()}),$("#odCel").on("click",function(){$("#od-mask, #od-tipbox").addClass("hidden")}),$("#sbtn").on("click",function(s){s.stopPropagation(),$("#od-mask, #od-tipbox").removeClass("hidden")})}function r(){$("#loaddingIcon").removeClass("hidden"),a.post("808052",{json:{codeList:[l],payType:"90"}}).then(function(a){a.success?location.href="./pay_success.html":($("#loaddingIcon").addClass("hidden"),s.showMsg(a.msg),setTimeout(function(){location.href="../user/order_list.html"},2e3))})}var l=s.getUrlParam("code")||"";n(),p()});