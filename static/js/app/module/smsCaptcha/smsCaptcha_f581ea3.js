define("js/app/module/smsCaptcha/smsCaptcha",["js/lib/jquery-2.1.4","js/app/util/ajax","js/app/util/dialog"],function(i,o,t){function e(i,o){var e=t({content:i,quickClose:!0});e.show(),setTimeout(function(){e.close().remove()},o||1500)}function n(o){this.options=i.extend({},this.defaultOptions,o);var t=this;i("#"+this.options.id).off("click").on("click",function(){t.options.checkInfo()&&t.handleSendVerifiy()})}return n.prototype.defaultOptions={id:"getVerification",mobile:"mobile",checkInfo:function(){return i("#"+this.options.mobile).valid()},sendCode:"805904"},n.prototype.handleSendVerifiy=function(){var t=i("#"+this.options.id);t.attr("disabled","disabled"),o.post(this.options.sendCode,{json:{bizType:this.options.bizType,kind:"f1",mobile:i("#"+this.options.mobile).val()}}).then(function(i){if(i.success)for(var o=0;60>=o;o++)!function(i){setTimeout(function(){60>i?t.val(60-i+"s"):t.val("获取验证码").removeAttr("disabled")},1e3*i)}(o);else this.options.errorFn&&this.options.errorFn(),e(i.msg),t.val("获取验证码").removeAttr("disabled")},function(){this.options.errorFn&&this.options.errorFn(),e("验证码获取失败"),t.val("获取验证码").removeAttr("disabled")})},{init:function(i){new n(i)}}});