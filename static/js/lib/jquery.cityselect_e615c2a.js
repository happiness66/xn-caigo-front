!function(t){t.fn.citySelect=function(i){if(!(this.length<1)){i=t.extend({url:"../js/lib/city.min.js",prov:null,city:null,dist:null,nodata:null,required:!0},i);var n,e=this,l=e.find(".prov"),o=e.find(".city"),s=e.find(".dist"),c=(i.prov,i.city,i.dist,i.required?"":"<option value=''>请选择</option>"),p=function(){var e=l.get(0).selectedIndex;return i.required||e--,o.empty(),s.empty(),0>e||"undefined"==typeof n.citylist[e].c?(o.css("display","none"),s.css("display","none"),o.prev().filter(".chosen-container").css("display","none"),s.prev().filter(".chosen-container").css("display","none"),void o.valid()):(temp_html=c,t.each(n.citylist[e].c,function(t,i){temp_html+="<option value='"+i.n+"'>"+i.n+"</option>"}),s.html(c),o.html(temp_html),o.css("display","inline-block"),o.prev().filter(".chosen-container").css({display:"",visibility:""}),void a())},a=function(){var e=l.get(0).selectedIndex,p=o.get(0).selectedIndex;return i.required||(e--,p--),s.empty(),0>e||0>p||"undefined"==typeof n.citylist[e].c[p].a?(s.css("display","none"),s.prev().filter(".chosen-container").css("display","none"),void s.valid()):(temp_html=c,t.each(n.citylist[e].c[p].a,function(t,i){temp_html+="<option value='"+i.s+"'>"+i.s+"</option>"}),s.html(temp_html),s.css("display","inline-block"),void s.prev().filter(".chosen-container").css({display:"",visibility:""}))},d=function(){temp_html=c,t.each(n.citylist,function(t,i){temp_html+="<option value='"+i.p+"'>"+i.p+"</option>"}),l.html(temp_html),setTimeout(function(){null!=i.prov&&(l.val(i.prov),p(),setTimeout(function(){null!=i.city&&(o.val(i.city),a(),setTimeout(function(){null!=i.dist&&s.val(i.dist)},1))},1))},1),l.bind("change",function(){p()}),o.bind("change",function(){a()})};t.ajaxSettings.async=!1,"string"==typeof i.url?t.getJSON(i.url,function(t){n=t,d()}):(n=i.url,d()),t.ajaxSettings.async=!0}}}(jQuery);